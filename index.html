<!DOCTYPE html>
<html>
 <link rel="stylesheet" href="style.css">
<body>
<h1>Weight Lifting Simulator</h1>
<p>Weight lifing simulator is a awesome simulator game about<br>
lifing weights and selling your strength for money to buy better<br>
Weights and you can stack your weights.</p>
<form action="#" method="POST" onsubmit="return false;">
  <div class="g-recaptcha" data-sitekey="6Lf9bj4rAAAAADP0K87QtycXM6-LqXA_ahtyWFy0"></div>
  <input type="submit" value="Submit">
</form>
<script src="https://www.google.com/recaptcha/api.js" async defer></script>

<div id="bomb-timer" style="color: goldenrod; font-weight: bold; font-size: 1.2em; text-align:center; margin-bottom:10px;">
  Bomb drops in: 5:00
</div>

<button id="lift-btn">Lift Weights</button>
<button id="sell-btn">Sell</button>
<button id="buy-btn">Buy Weights</button>

<div>Weights Lifted: <span id="weights-lifted">0</span></div>
<div>Strength: <span id="strength">5</span></div>
<div>Coins: <span id="coins">0</span></div>

<div id="popup" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.7); justify-content:center; align-items:center;">
  <div style="background:#222; padding:20px; border:3px solid goldenrod; color:white; margin:auto; width:300px; text-align:center;">
    <button class="buy-weight" data-strength="20" data-cost="500">Buy Medium Weight (+20) - 500 Coins</button>
    <button class="buy-weight" data-strength="100" data-cost="1000">Buy Heavy Weight (+100) - 1000 Coins</button>
    <button class="buy-weight" data-strength="1000" data-cost="10000">Buy Ultra Weight (+1000) - 10,000 Coins</button>
    <button class="buy-weight owner-only" data-strength="1000000" data-cost="0">Buy OWNER WEIGHT (+1,000,000) - Owner Only</button>
    <button id="close-popup">Close</button>
  </div>
</div>

<div id="leaderboard" style="background:#222; padding:20px; border:3px solid goldenrod; color:white; width:90%; max-width:500px; margin:20px auto; text-align:center;">
  <h2>üèÜ Leaderboard</h2>
  <ol id="leaderboard-list"></ol>
</div>

<script>
  const omegaAdmins = ["KaydenDev123", "hgfghhccchgtjcdfhhhh"];
  let weightsLifted = 0;
  let coins = 0;
  let totalStrength = 5;
  const weights = { 20: 1, 100: 0, 1000: 0, 1000000: 0 };

  let currentUser = localStorage.getItem("username");
  if (!currentUser) {
    currentUser = prompt("Enter your GitHub username:") || "Guest";
    localStorage.setItem("username", currentUser);
  }
  const isOwner = omegaAdmins.includes(currentUser);
  if (!isOwner) {
    document.querySelector(".owner-only").style.display = "none";
  }

  const leaderboard = JSON.parse(localStorage.getItem("leaderboard")) || [];

  function updateStatsUI() {
    document.getElementById("weights-lifted").textContent = weightsLifted;
    document.getElementById("coins").textContent = coins;
    document.getElementById("strength").textContent = totalStrength;
  }

  function updateLeaderboard() {
    const existingPlayer = leaderboard.find(player => player.username === currentUser);
    if (existingPlayer) {
      existingPlayer.strength = totalStrength;
      existingPlayer.coins = coins;
    } else {
      leaderboard.push({ username: currentUser, strength: totalStrength, coins });
    }

    leaderboard.sort((a, b) => b.strength - a.strength || b.coins - a.coins);
    if (leaderboard.length > 100) leaderboard.length = 100;

    localStorage.setItem("leaderboard", JSON.stringify(leaderboard));
    
    const leaderboardList = document.getElementById("leaderboard-list");
    leaderboardList.innerHTML = "";
    leaderboard.forEach((player, index) => {
      const li = document.createElement("li");
      li.textContent = `#${index + 1} - ${player.username}: Strength ${player.strength} | Coins ${player.coins}`;
      leaderboardList.appendChild(li);
    });
  }

  function bombDrop() {
    weightsLifted = Math.floor(weightsLifted * 0.8);
    coins = Math.floor(coins * 0.8);
    totalStrength = Math.floor(totalStrength * 0.8);
    updateStatsUI();
    updateLeaderboard();
    alert("üí£ Bomb dropped! 20% of your stats lost.");
  }

  document.getElementById("lift-btn").onclick = () => {
    let liftAmount = 0;
    for (const [weight, count] of Object.entries(weights)) {
      liftAmount += count * Number(weight);
    }
    weightsLifted += liftAmount;
    updateStatsUI();
    updateLeaderboard();
  };

  document.getElementById("sell-btn").onclick = () => {
    coins += weightsLifted;
    weightsLifted = 0;
    updateStatsUI();
    updateLeaderboard();
  };

  document.getElementById("buy-btn").onclick = () => {
    document.getElementById("popup").style.display = "flex";
  };

  document.getElementById("close-popup").onclick = () => {
    document.getElementById("popup").style.display = "none";
  };

  document.querySelectorAll(".buy-weight").forEach(button => {
    button.onclick = () => {
      const weightStrength = Number(button.dataset.strength);
      const cost = Number(button.dataset.cost);
      if (button.classList.contains("owner-only") && !isOwner) {
        alert("You are not the owner!");
        return;
      }
      if (coins >= cost) {
        coins -= cost;
        weights[weightStrength] = (weights[weightStrength] || 0) + 1;
        totalStrength += weightStrength;
        updateStatsUI();
        updateLeaderboard();
        document.getElementById("popup").style.display = "none";
      } else if (cost > 0) {
        alert("Not enough coins!");
      }
    };
  });

  // Bomb countdown timer - 5 minutes countdown and drop
  let countdown = 300;
  const bombTimer = document.getElementById("bomb-timer");
  setInterval(() => {
    countdown--;
    if (countdown <= 0) {
      bombDrop();
      countdown = 300;
    }
    const minutes = Math.floor(countdown / 60);
    const seconds = countdown % 60;
    bombTimer.textContent = `Bomb drops in: ${minutes}:${seconds.toString().padStart(2, "0")}`;
  }, 1000);

  updateStatsUI();
  updateLeaderboard();
</script>
</body>
</html>
